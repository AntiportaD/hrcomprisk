---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# hrcomprisk

<!-- badges: start -->
<!-- badges: end -->

The goal of hrcomprisk is to estimate Nonparametric Cumulative-Incidence Based Estimation of the Ratios of Sub-Hazard Ratios to Cause-Specific Hazard Ratios

## Installation

You can install the version 0.1.0 of `hrcomprisk` from [Github](https://github.com) with:

``` r
library(devtools)
install_github("AntiportaD/hrcomprisk")
```

## Using a formatted data set to apply the `hrcomprsk` package

You can use the dataset provided by the authors from the [CKiD study](https://statepi.jhsph.edu/ckid/, wich has the necessary variables to run the package.

```{r example}
library(hrcomprisk)
data <- hrcomprisk::dat_ckid
dim(data) #dimensions
names(data) #varible names
```

The package will create a `data.frame` object with the cumulative incidence of each competing risk for each exposure group. We can use the `CRCumInc` fuction.

```{r CRCumInc_example}
mydat.CIF<-CRCumInc(data, exit, event, exposed=b1nb0, print.attr = T)
```

We can also obtain two different plots: the Cumulative Incidence of the both events of interest overall and by exposure level, and, 2. The ratios of Hazard rations (sub-distribution Hazard Ratio and cause-specific Hazard Ratio) by event.

```{r plotCIF, echo = FALSE, fig.height=8, fig.width=10}
plotCIF(mydat.CIF, maxtime = 20, eoi = 1)
```

In order to get confidence intervals to the ratio of Hazard Ratios (Rk), we can use the `bootCRCumInc` function:
```{r boot_example}
ciCIF<-bootCRCumInc(data, exit, event, exposure=b1nb0, rep=100, print.attr = T)
```

Finally, we can use this new data to add the 95% Confidence Intervals to the previous plot using again the `plotCIF` function.

```{r plot_ci, echo = FALSE, fig.height=8, fig.width=10}
plotCIF(mydat.CIF, maxtime = 20, ci = ciCIF, eoi=1)
```

The package also offers a wrapper function (`npcrest`) to do all this analyses in one step.

```{r npcrest, fig.height=8, fig.width=10}
npcrest(data, exit, event, exposure=b1nb0,  rep=100, eoi=1)
```
